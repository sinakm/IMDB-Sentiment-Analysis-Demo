{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.202.0"},"children":{"SentimentAnalysisStack-prod":{"id":"SentimentAnalysisStack-prod","path":"SentimentAnalysisStack-prod","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.202.0"},"children":{"LambdaConstruct":{"id":"LambdaConstruct","path":"SentimentAnalysisStack-prod/LambdaConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"ExecutionRole":{"id":"ExecutionRole","path":"SentimentAnalysisStack-prod/LambdaConstruct/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"SentimentAnalysisStack-prod/LambdaConstruct/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/LambdaConstruct/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Execution role for sentiment analysis Lambda function","managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"roleName":"sentiment-analysis-lambda-role-prod","tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SentimentAnalysisStack-prod/LambdaConstruct/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/LambdaConstruct/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"tag:GetResources","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LambdaConstructExecutionRoleDefaultPolicy31F9FBD4","roles":[{"Ref":"LambdaConstructExecutionRole0DD1E121"}]}}}}}}},"LogGroup":{"id":"LogGroup","path":"SentimentAnalysisStack-prod/LambdaConstruct/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/LambdaConstruct/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/lambda/sentiment-analysis","retentionInDays":7,"tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}]}}}}},"Function":{"id":"Function","path":"SentimentAnalysisStack-prod/LambdaConstruct/Function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.202.0","metadata":[]},"children":{"AssetImage":{"id":"AssetImage","path":"SentimentAnalysisStack-prod/LambdaConstruct/Function/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.202.0"},"children":{"Staging":{"id":"Staging","path":"SentimentAnalysisStack-prod/LambdaConstruct/Function/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.202.0"}},"Repository":{"id":"Repository","path":"SentimentAnalysisStack-prod/LambdaConstruct/Function/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.202.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/LambdaConstruct/Function/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"imageUri":{"Fn::Sub":"${AWS::AccountId}.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-us-east-1:5f1077b6daf7779a88306d46c3ac28280596196716d8124efb5a08ce51fe7247"}},"description":"Sentiment analysis using LSTM and Verbalizer models","environment":{"variables":{"PYTHONPATH":"/var/task","MODEL_PATH":"/var/task/models","LOG_LEVEL":"INFO","ENVIRONMENT":"prod","TAG_PROJECT":"sentiment-analysis","TAG_ENVIRONMENT":"prod","TAG_OWNER":"ml-team","TAG_MANAGEDBY":"CDK","TAG_SERVICE":"sentiment-analysis-api","TAG_RESOURCETYPE":"Lambda-Function","TAG_MODELTYPES":"LSTM-Verbalizer"}},"functionName":"sentiment-analysis-function-prod","loggingConfig":{"logGroup":{"Ref":"LambdaConstructLogGroup3DEBA95C"}},"memorySize":2048,"packageType":"Image","role":{"Fn::GetAtt":["LambdaConstructExecutionRole0DD1E121","Arn"]},"tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}],"timeout":300}}}}}}},"ApiGatewayConstruct":{"id":"ApiGatewayConstruct","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"RestApi":{"id":"RestApi","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"API for sentiment analysis using multiple ML models","endpointConfiguration":{"types":["REGIONAL"]},"name":"sentiment-analysis-api-prod","tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}]}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}],"tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}]}}}}},"Account":{"id":"Account","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ApiGatewayConstructRestApiCloudWatchRole6F277622","Arn"]}}}},"Deployment":{"id":"Deployment","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"API for sentiment analysis using multiple ML models","restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ApiGatewayConstructRestApiDeploymentD0BFA00F251e464cbff382bd7d5206fc773a71b4"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":true,"loggingLevel":"INFO","metricsEnabled":true,"throttlingBurstLimit":200,"throttlingRateLimit":100}],"restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"stageName":"prod","tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}]}}}}},"Endpoint":{"id":"Endpoint","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"Default":{"id":"Default","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.202.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["ApiGatewayConstructRestApi5BCF74CD","RootResourceId"]},"restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"}}}}}},"predict":{"id":"predict","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/predict","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/predict/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ApiGatewayConstructRestApi5BCF74CD","RootResourceId"]},"pathPart":"predict","restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"}}}},"OPTIONS":{"id":"OPTIONS","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/predict/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/predict/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayConstructRestApipredictC8BF3EAA"},"restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"}}}}}},"POST":{"id":"POST","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/predict/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"ApiPermission.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.POST..predict":{"id":"ApiPermission.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.POST..predict","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/predict/POST/ApiPermission.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.POST..predict","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaConstructFunction651B616A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"/",{"Ref":"ApiGatewayConstructRestApiDeploymentStageprod15911FDB"},"/POST/predict"]]}}}},"ApiPermission.Test.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.POST..predict":{"id":"ApiPermission.Test.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.POST..predict","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/predict/POST/ApiPermission.Test.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.POST..predict","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaConstructFunction651B616A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"/test-invoke-stage/POST/predict"]]}}}},"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/predict/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":true,"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdaConstructFunction651B616A","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"statusCode\": \"200\"}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"},"responseTemplates":{"application/json":""}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"},"responseTemplates":{"application/json":"{\"error\": \"Bad Request\"}"},"selectionPattern":".*Bad Request.*"},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"},"responseTemplates":{"application/json":"{\"error\": \"Internal Server Error\"}"},"selectionPattern":".*Internal Server Error.*"}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true},"responseModels":{"application/json":{"Ref":"ApiGatewayConstructRestApiSuccessResponseModel874B7DE1"}}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true},"responseModels":{"application/json":{"Ref":"ApiGatewayConstructRestApiErrorResponseModel84BFC13C"}}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true},"responseModels":{"application/json":{"Ref":"ApiGatewayConstructRestApiErrorResponseModel84BFC13C"}}}],"requestModels":{"application/json":{"Ref":"ApiGatewayConstructRestApiPredictRequestModel0AE65827"}},"requestValidatorId":{"Ref":"ApiGatewayConstructRestApiRequestValidator353D0C6D"},"resourceId":{"Ref":"ApiGatewayConstructRestApipredictC8BF3EAA"},"restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"}}}}}}}},"health":{"id":"health","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/health","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/health/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ApiGatewayConstructRestApi5BCF74CD","RootResourceId"]},"pathPart":"health","restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"}}}},"OPTIONS":{"id":"OPTIONS","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/health/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/health/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayConstructRestApihealth991E6141"},"restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"}}}}}},"GET":{"id":"GET","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/health/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"ApiPermission.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.GET..health":{"id":"ApiPermission.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.GET..health","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/health/GET/ApiPermission.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.GET..health","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaConstructFunction651B616A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"/",{"Ref":"ApiGatewayConstructRestApiDeploymentStageprod15911FDB"},"/GET/health"]]}}}},"ApiPermission.Test.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.GET..health":{"id":"ApiPermission.Test.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.GET..health","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/health/GET/ApiPermission.Test.SentimentAnalysisStackprodApiGatewayConstructRestApi8102119A.GET..health","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaConstructFunction651B616A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"/test-invoke-stage/GET/health"]]}}}},"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/Default/health/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdaConstructFunction651B616A","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"statusCode\": \"200\"}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"},"responseTemplates":{"application/json":""}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"},"responseTemplates":{"application/json":"{\"error\": \"Bad Request\"}"},"selectionPattern":".*Bad Request.*"},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"},"responseTemplates":{"application/json":"{\"error\": \"Internal Server Error\"}"},"selectionPattern":".*Internal Server Error.*"}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true},"responseModels":{"application/json":"Empty"}},{"statusCode":"503","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true},"responseModels":{"application/json":{"Ref":"ApiGatewayConstructRestApiErrorResponseModel84BFC13C"}}}],"resourceId":{"Ref":"ApiGatewayConstructRestApihealth991E6141"},"restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"}}}}}}}}}},"PredictRequestModel":{"id":"PredictRequestModel","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/PredictRequestModel","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Model","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/PredictRequestModel/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnModel","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Model","aws:cdk:cloudformation:props":{"contentType":"application/json","name":"PredictRequest","restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"schema":{"additionalProperties":false,"properties":{"text":{"description":"Text to analyze for sentiment","maxLength":5000,"minLength":1,"type":"string"},"model":{"description":"Model to use for analysis","enum":["lstm","verbalizer","both"],"type":"string"}},"required":["text"],"$schema":"http://json-schema.org/draft-04/schema#","title":"Predict Request","type":"object"}}}}}},"SuccessResponseModel":{"id":"SuccessResponseModel","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/SuccessResponseModel","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Model","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/SuccessResponseModel/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnModel","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Model","aws:cdk:cloudformation:props":{"contentType":"application/json","name":"SuccessResponse","restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"schema":{"properties":{"text":{"type":"string"},"predictions":{"type":"object"},"consensus":{"type":"object"},"total_processing_time_ms":{"type":"number"},"models_available":{"type":"number"},"version":{"type":"string"}},"$schema":"http://json-schema.org/draft-04/schema#","title":"Success Response","type":"object"}}}}}},"ErrorResponseModel":{"id":"ErrorResponseModel","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/ErrorResponseModel","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Model","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/ErrorResponseModel/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnModel","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Model","aws:cdk:cloudformation:props":{"contentType":"application/json","name":"ErrorResponse","restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"schema":{"properties":{"error":{"type":"string"},"message":{"type":"string"},"request_id":{"type":"string"}},"$schema":"http://json-schema.org/draft-04/schema#","title":"Error Response","type":"object"}}}}}},"RequestValidator":{"id":"RequestValidator","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/RequestValidator","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RequestValidator","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/RequestValidator/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRequestValidator","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RequestValidator","aws:cdk:cloudformation:props":{"restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"validateRequestBody":true,"validateRequestParameters":true}}}}},"ApiKey":{"id":"ApiKey","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/ApiKey","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ApiKey","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/ApiKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnApiKey","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::ApiKey","aws:cdk:cloudformation:props":{"description":"API key for sentiment analysis service","enabled":true,"name":"sentiment-analysis-api-key-prod","stageKeys":[{"restApiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"stageName":{"Ref":"ApiGatewayConstructRestApiDeploymentStageprod15911FDB"}}],"tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}]}}}}},"UsagePlan":{"id":"UsagePlan","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/UsagePlan","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.UsagePlan","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/UsagePlan/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnUsagePlan","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::UsagePlan","aws:cdk:cloudformation:props":{"apiStages":[{"apiId":{"Ref":"ApiGatewayConstructRestApi5BCF74CD"},"stage":{"Ref":"ApiGatewayConstructRestApiDeploymentStageprod15911FDB"},"throttle":{}}],"description":"Usage plan for Sentiment Analysis API","quota":{"limit":10000,"period":"MONTH"},"tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}],"throttle":{"burstLimit":200,"rateLimit":100},"usagePlanName":"sentiment-analysis-usage-plan-prod"}}},"UsagePlanKeyResource:SentimentAnalysisStackprodApiGatewayConstructRestApiApiKey1998E052":{"id":"UsagePlanKeyResource:SentimentAnalysisStackprodApiGatewayConstructRestApiApiKey1998E052","path":"SentimentAnalysisStack-prod/ApiGatewayConstruct/RestApi/UsagePlan/UsagePlanKeyResource:SentimentAnalysisStackprodApiGatewayConstructRestApiApiKey1998E052","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnUsagePlanKey","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::UsagePlanKey","aws:cdk:cloudformation:props":{"keyId":{"Ref":"ApiGatewayConstructRestApiApiKey69F04C6C"},"keyType":"API_KEY","usagePlanId":{"Ref":"ApiGatewayConstructRestApiUsagePlanA38B8389"}}}}}}}}}},"MonitoringConstruct":{"id":"MonitoringConstruct","path":"SentimentAnalysisStack-prod/MonitoringConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"AlarmErrorRate":{"id":"AlarmErrorRate","path":"SentimentAnalysisStack-prod/MonitoringConstruct/AlarmErrorRate","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/MonitoringConstruct/AlarmErrorRate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"High error rate in sentiment analysis function","alarmName":"sentiment-analysis-alarm-errorrate-prod","tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}],"comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"LambdaConstructFunction651B616A"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"AlarmDuration":{"id":"AlarmDuration","path":"SentimentAnalysisStack-prod/MonitoringConstruct/AlarmDuration","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/MonitoringConstruct/AlarmDuration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"High execution duration in sentiment analysis function","alarmName":"sentiment-analysis-alarm-duration-prod","tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}],"comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"LambdaConstructFunction651B616A"}}],"evaluationPeriods":3,"metricName":"Duration","namespace":"AWS/Lambda","period":300,"statistic":"Average","threshold":30000,"treatMissingData":"notBreaching"}}}}},"AlarmThrottles":{"id":"AlarmThrottles","path":"SentimentAnalysisStack-prod/MonitoringConstruct/AlarmThrottles","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/MonitoringConstruct/AlarmThrottles/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Function throttling detected","alarmName":"sentiment-analysis-alarm-throttles-prod","tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"FunctionName","value":{"Ref":"LambdaConstructFunction651B616A"}}],"evaluationPeriods":1,"metricName":"Throttles","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"Api4XXErrorAlarm":{"id":"Api4XXErrorAlarm","path":"SentimentAnalysisStack-prod/MonitoringConstruct/Api4XXErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/MonitoringConstruct/Api4XXErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"High 4XX error rate in API Gateway","alarmName":"sentiment-analysis-alarm-api-4xx-prod","tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}],"comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"ApiName","value":"sentiment-analysis-api-prod"}],"evaluationPeriods":2,"metricName":"4XXError","namespace":"AWS/ApiGateway","period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"Api5XXErrorAlarm":{"id":"Api5XXErrorAlarm","path":"SentimentAnalysisStack-prod/MonitoringConstruct/Api5XXErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/MonitoringConstruct/Api5XXErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"High 5XX error rate in API Gateway","alarmName":"sentiment-analysis-alarm-api-5xx-prod","tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}],"comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":1,"dimensions":[{"name":"ApiName","value":"sentiment-analysis-api-prod"}],"evaluationPeriods":1,"metricName":"5XXError","namespace":"AWS/ApiGateway","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"ApiLatencyAlarm":{"id":"ApiLatencyAlarm","path":"SentimentAnalysisStack-prod/MonitoringConstruct/ApiLatencyAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/MonitoringConstruct/ApiLatencyAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"High latency in API Gateway","alarmName":"sentiment-analysis-alarm-api-latency-prod","tags":[{"key":"Component","value":"API"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"ModelTypes","value":"LSTM-Verbalizer"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-api"},{"key":"StackName","value":"SentimentAnalysisStack-prod"}],"comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"ApiName","value":"sentiment-analysis-api-prod"}],"evaluationPeriods":3,"metricName":"Latency","namespace":"AWS/ApiGateway","period":300,"statistic":"Average","threshold":10000,"treatMissingData":"notBreaching"}}}}},"Dashboard":{"id":"Dashboard","path":"SentimentAnalysisStack-prod/MonitoringConstruct/Dashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisStack-prod/MonitoringConstruct/Dashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"widgets\":[{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda Function Metrics\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"LambdaConstructFunction651B616A"},"\",{\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"LambdaConstructFunction651B616A"},"\",{\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"LambdaConstructFunction651B616A"},"\",{\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"LambdaConstructFunction651B616A"},"\",{\"yAxis\":\"right\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Gateway Metrics\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ApiGateway\",\"Count\",\"ApiName\",\"sentiment-analysis-api-prod\",{\"stat\":\"SampleCount\"}],[\"AWS/ApiGateway\",\"4XXError\",\"ApiName\",\"sentiment-analysis-api-prod\",{\"stat\":\"Sum\"}],[\"AWS/ApiGateway\",\"5XXError\",\"ApiName\",\"sentiment-analysis-api-prod\",{\"stat\":\"Sum\"}],[\"AWS/ApiGateway\",\"Latency\",\"ApiName\",\"sentiment-analysis-api-prod\",{\"yAxis\":\"right\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Custom Application Metrics\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"SentimentAnalysis\",\"ModelInferenceTime\"],[\"SentimentAnalysis\",\"ModelAccuracy\"],[\"SentimentAnalysis\",\"RequestSize\"]],\"yAxis\":{}}},{\"type\":\"alarm\",\"width\":24,\"height\":4,\"x\":0,\"y\":12,\"properties\":{\"title\":\"Alarm Status\",\"alarms\":[\"",{"Fn::GetAtt":["MonitoringConstructAlarmErrorRate70D4AB7A","Arn"]},"\",\"",{"Fn::GetAtt":["MonitoringConstructAlarmDurationB9C8C4E2","Arn"]},"\",\"",{"Fn::GetAtt":["MonitoringConstructAlarmThrottles3A9F8382","Arn"]},"\",\"",{"Fn::GetAtt":["MonitoringConstructApi4XXErrorAlarmDF4BBF28","Arn"]},"\",\"",{"Fn::GetAtt":["MonitoringConstructApi5XXErrorAlarm96DB23E6","Arn"]},"\",\"",{"Fn::GetAtt":["MonitoringConstructApiLatencyAlarm8CE2EC7F","Arn"]},"\"]}}]}"]]},"dashboardName":"sentiment-analysis-dashboard-prod"}}}}}}},"ApiUrl":{"id":"ApiUrl","path":"SentimentAnalysisStack-prod/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"PredictEndpoint":{"id":"PredictEndpoint","path":"SentimentAnalysisStack-prod/PredictEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"HealthEndpoint":{"id":"HealthEndpoint","path":"SentimentAnalysisStack-prod/HealthEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"ApiKeyId":{"id":"ApiKeyId","path":"SentimentAnalysisStack-prod/ApiKeyId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"ApiKeyCommand":{"id":"ApiKeyCommand","path":"SentimentAnalysisStack-prod/ApiKeyCommand","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"LambdaFunctionName":{"id":"LambdaFunctionName","path":"SentimentAnalysisStack-prod/LambdaFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"LambdaFunctionArn":{"id":"LambdaFunctionArn","path":"SentimentAnalysisStack-prod/LambdaFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"DashboardUrl":{"id":"DashboardUrl","path":"SentimentAnalysisStack-prod/DashboardUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"UsageInstructions":{"id":"UsageInstructions","path":"SentimentAnalysisStack-prod/UsageInstructions","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SentimentAnalysisStack-prod/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"SentimentAnalysisStack-prod/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.202.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SentimentAnalysisStack-prod/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.202.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SentimentAnalysisStack-prod/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.202.0"}}}},"SentimentAnalysisFrontendStack-prod":{"id":"SentimentAnalysisFrontendStack-prod","path":"SentimentAnalysisFrontendStack-prod","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.202.0"},"children":{"FrontendConstruct":{"id":"FrontendConstruct","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"FrontendBucket":{"id":"FrontendBucket","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":{"Fn::Join":["",["sentiment-analysis-frontend-prod-",{"Ref":"AWS::AccountId"},"-1750701249"]]},"lifecycleConfiguration":{"rules":[{"id":"DeleteOldVersions","noncurrentVersionExpiration":{"noncurrentDays":30},"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:cr-owned:bb16c4f9","value":"true"},{"key":"Component","value":"static-hosting"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-frontend"},{"key":"StackName","value":"SentimentAnalysisFrontendStack-prod"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"FrontendConstructFrontendBucketEA061DFC"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"FrontendConstructFrontendDistribution37614C4A"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["FrontendConstructFrontendBucketEA061DFC","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"FrontendDistribution":{"id":"FrontendDistribution","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.202.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"S3OriginAccessControl":{"id":"S3OriginAccessControl","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDistribution/Origin1/S3OriginAccessControl","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDistribution/Origin1/S3OriginAccessControl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"SentimentAnalysisFrontendStaOrigin1S3OriginAccessControl259B2A54","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}}}},"Origin2":{"id":"Origin2","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDistribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"S3OriginAccessControl":{"id":"S3OriginAccessControl","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDistribution/Origin2/S3OriginAccessControl","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDistribution/Origin2/S3OriginAccessControl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"SentimentAnalysisFrontendStaOrigin2S3OriginAccessControlCCCA50A2","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}}}},"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["FrontendConstructFrontendBucketEA061DFC","RegionalDomainName"]},"id":"SentimentAnalysisFrontendStackprodFrontendConstructFrontendDistributionOrigin1AC6D1461","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["FrontendConstructFrontendDistributionOrigin1S3OriginAccessControlD5F33C8B","Id"]}},{"domainName":{"Fn::GetAtt":["FrontendConstructFrontendBucketEA061DFC","RegionalDomainName"]},"id":"SentimentAnalysisFrontendStackprodFrontendConstructFrontendDistributionOrigin24EC060CF","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["FrontendConstructFrontendDistributionOrigin2S3OriginAccessControl433BF098","Id"]}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"SentimentAnalysisFrontendStackprodFrontendConstructFrontendDistributionOrigin1AC6D1461","allowedMethods":["GET","HEAD","OPTIONS"],"cachedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"88a5eaf4-2fd4-4709-b370-b4c650ea3fcf","responseHeadersPolicyId":"67f7725c-6f97-4210-82d7-5512b31e9d03","viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"/static/*","targetOriginId":"SentimentAnalysisFrontendStackprodFrontendConstructFrontendDistributionOrigin24EC060CF","allowedMethods":["GET","HEAD"],"cachedMethods":["GET","HEAD"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"}],"comment":"Sentiment Analysis Frontend - prod","customErrorResponses":[{"errorCachingMinTtl":300,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":300,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"},"tags":[{"key":"Component","value":"cdn"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-frontend"},{"key":"StackName","value":"SentimentAnalysisFrontendStack-prod"}]}}}}},"FrontendDeployment":{"id":"FrontendDeployment","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.202.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.202.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.202.0"},"children":{"Stage":{"id":"Stage","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.202.0"}},"AssetBucket":{"id":"AssetBucket","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.202.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"1b2c92f2cd21c170884393633bd4c732676df6290562199b6e3ca5e2a1be7d18.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.202.0","metadata":[]}},"Asset1":{"id":"Asset1","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.202.0"},"children":{"Stage":{"id":"Stage","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.202.0"}},"AssetBucket":{"id":"AssetBucket","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.202.0","metadata":[]}}}},"CustomResource":{"id":"CustomResource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/CustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.202.0","metadata":[]},"children":{"Default":{"id":"Default","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendDeployment/CustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.202.0"}}}}}},"ConfigUpdater":{"id":"ConfigUpdater","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/ConfigUpdater","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.202.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/ConfigUpdater/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/ConfigUpdater/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/ConfigUpdater/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Component","value":"Frontend"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-frontend"},{"key":"StackName","value":"SentimentAnalysisFrontendStack-prod"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/ConfigUpdater/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/ConfigUpdater/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["FrontendConstructFrontendBucketEA061DFC","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FrontendConstructFrontendBucketEA061DFC","Arn"]},"/*"]]}]},{"Action":"apigateway:GET","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:apigateway:",{"Ref":"AWS::Region"},"::/apikeys/*"]]}}],"Version":"2012-10-17"},"policyName":"FrontendConstructConfigUpdaterServiceRoleDefaultPolicy85CA8211","roles":[{"Ref":"FrontendConstructConfigUpdaterServiceRole93D6FF4E"}]}}}}}}},"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/ConfigUpdater/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\nimport boto3\nimport json\nimport urllib3\n\ndef handler(event, context):\n    print(f\"Event: {json.dumps(event)}\")\n    \n    try:\n        s3 = boto3.client('s3')\n        apigateway = boto3.client('apigateway')\n        \n        bucket_name = event['ResourceProperties']['BucketName']\n        api_url = event['ResourceProperties']['ApiUrl']\n        api_key_id = event['ResourceProperties']['ApiKeyId']\n        environment = event['ResourceProperties']['Environment']\n        \n        # Get the actual API key value from API Gateway\n        try:\n            api_key_response = apigateway.get_api_key(\n                apiKey=api_key_id,\n                includeValue=True\n            )\n            api_key_value = api_key_response['value']\n            print(f\"Retrieved API key value for ID: {api_key_id}\")\n        except Exception as e:\n            print(f\"Error retrieving API key: {e}\")\n            api_key_value = api_key_id  # Fallback to ID if retrieval fails\n        \n        # Create the runtime configuration content with actual API key value\n        config_content = f'''window.__ENV__ = {{\n  API_URL: '{api_url}',\n  API_KEY_ID: '{api_key_value}',\n  ENVIRONMENT: '{environment}'\n}};'''\n        \n        if event['RequestType'] in ['Create', 'Update']:\n            # Upload the configuration file to S3\n            s3.put_object(\n                Bucket=bucket_name,\n                Key='env.js',\n                Body=config_content,\n                ContentType='application/javascript',\n                CacheControl='no-cache'\n            )\n            print(f\"Successfully uploaded env.js to {bucket_name}\")\n        \n        elif event['RequestType'] == 'Delete':\n            # Delete the configuration file\n            try:\n                s3.delete_object(Bucket=bucket_name, Key='env.js')\n                print(f\"Successfully deleted env.js from {bucket_name}\")\n            except Exception as e:\n                print(f\"Error deleting env.js: {e}\")\n        \n        # Send success response\n        send_response(event, context, 'SUCCESS', {})\n        \n    except Exception as e:\n        print(f\"Error: {e}\")\n        send_response(event, context, 'FAILED', {})\n\ndef send_response(event, context, status, data):\n    response_body = {\n        'Status': status,\n        'Reason': f'See CloudWatch Log Stream: {context.log_stream_name}',\n        'PhysicalResourceId': context.log_stream_name,\n        'StackId': event['StackId'],\n        'RequestId': event['RequestId'],\n        'LogicalResourceId': event['LogicalResourceId'],\n        'Data': data\n    }\n    \n    http = urllib3.PoolManager()\n    response = http.request(\n        'PUT',\n        event['ResponseURL'],\n        body=json.dumps(response_body),\n        headers={'Content-Type': 'application/json'}\n    )\n    print(f\"Response status: {response.status}\")\n            "},"handler":"index.handler","role":{"Fn::GetAtt":["FrontendConstructConfigUpdaterServiceRole93D6FF4E","Arn"]},"runtime":"python3.9","tags":[{"key":"Component","value":"Frontend"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-frontend"},{"key":"StackName","value":"SentimentAnalysisFrontendStack-prod"}],"timeout":300}}}}},"FrontendConfigUpdater":{"id":"FrontendConfigUpdater","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendConfigUpdater","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.202.0"},"children":{"Provider":{"id":"Provider","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendConfigUpdater/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendConfigUpdater/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.202.0","metadata":[]},"children":{"Default":{"id":"Default","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendConfigUpdater/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.202.0"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendConfigUpdater/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/FrontendConstruct/FrontendConfigUpdater/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":{"Fn::GetAtt":["FrontendConstructConfigUpdater6B50B7F2","Arn"]}}],"Version":"2012-10-17"},"policyName":"FrontendConstructFrontendConfigUpdaterCustomResourcePolicy89393BC7","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.202.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Component","value":"Frontend"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-frontend"},{"key":"StackName","value":"SentimentAnalysisFrontendStack-prod"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:s3:::",{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"/*"]]},{"Fn::Join":["",["arn:aws:s3:::",{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"}]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["FrontendConstructFrontendBucketEA061DFC","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FrontendConstructFrontendBucketEA061DFC","Arn"]},"/*"]]}]},{"Action":["cloudfront:CreateInvalidation","cloudfront:GetInvalidation"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"}]}}}}}}},"Code":{"id":"Code","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.202.0"},"children":{"Stage":{"id":"Stage","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.202.0"}},"AssetBucket":{"id":"AssetBucket","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.202.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"9a1fcb4a7ecba81ad70e9d3fb241f6794497da945dae5f25924e4dd002b65f2d.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"handler":"index.handler","layers":[{"Ref":"FrontendConstructFrontendDeploymentAwsCliLayer14BFEDB4"}],"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265","Arn"]},"runtime":"python3.11","tags":[{"key":"Component","value":"Frontend"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-frontend"},{"key":"StackName","value":"SentimentAnalysisFrontendStack-prod"}],"timeout":900}}}}},"AWS679f53fac002430cb0da5b7982bd2287":{"id":"AWS679f53fac002430cb0da5b7982bd2287","path":"SentimentAnalysisFrontendStack-prod/AWS679f53fac002430cb0da5b7982bd2287","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.202.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"SentimentAnalysisFrontendStack-prod/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SentimentAnalysisFrontendStack-prod/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Component","value":"Frontend"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-frontend"},{"key":"StackName","value":"SentimentAnalysisFrontendStack-prod"}]}}}}},"Code":{"id":"Code","path":"SentimentAnalysisFrontendStack-prod/AWS679f53fac002430cb0da5b7982bd2287/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.202.0"},"children":{"Stage":{"id":"Stage","path":"SentimentAnalysisFrontendStack-prod/AWS679f53fac002430cb0da5b7982bd2287/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.202.0"}},"AssetBucket":{"id":"AssetBucket","path":"SentimentAnalysisFrontendStack-prod/AWS679f53fac002430cb0da5b7982bd2287/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.202.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SentimentAnalysisFrontendStack-prod/AWS679f53fac002430cb0da5b7982bd2287/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"c099eb4e32cbf1c3da9c45a3b280efe2bed38d27d74aa72702b67d86d1b52354.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Component","value":"Frontend"},{"key":"DeploymentMethod","value":"CDK"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"ml-team"},{"key":"Project","value":"SentimentAnalysis"},{"key":"Service","value":"sentiment-analysis-frontend"},{"key":"StackName","value":"SentimentAnalysisFrontendStack-prod"}],"timeout":120}}}}},"FrontendUrl":{"id":"FrontendUrl","path":"SentimentAnalysisFrontendStack-prod/FrontendUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"FrontendBucket":{"id":"FrontendBucket","path":"SentimentAnalysisFrontendStack-prod/FrontendBucket","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"CloudFrontDistributionId":{"id":"CloudFrontDistributionId","path":"SentimentAnalysisFrontendStack-prod/CloudFrontDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"CloudFrontDomainName":{"id":"CloudFrontDomainName","path":"SentimentAnalysisFrontendStack-prod/CloudFrontDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"DeploymentInfo":{"id":"DeploymentInfo","path":"SentimentAnalysisFrontendStack-prod/DeploymentInfo","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SentimentAnalysisFrontendStack-prod/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"SentimentAnalysisFrontendStack-prod/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.202.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SentimentAnalysisFrontendStack-prod/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.202.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SentimentAnalysisFrontendStack-prod/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.202.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}